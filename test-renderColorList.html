<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test renderColorList() - SVG Color Palette Analyzer</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            padding: 20px;
            background: #f7fafc;
        }
        .test-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #2d3748;
        }
        .test-info {
            background: #edf2f7;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #4a5568;
        }
        .test-info h2 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: #2d3748;
        }
        .test-info ul {
            margin-left: 20px;
        }
        .test-info li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Test: renderColorList()</h1>
        
        <div class="test-info">
            <h2>What to verify:</h2>
            <ul>
                <li>✓ Color items are displayed</li>
                <li>✓ HTML5 color picker for each color</li>
                <li>✓ Hex codes in uppercase</li>
                <li>✓ Percentages with 2 decimals</li>
                <li>✓ Visual percentage bars</li>
                <li>✓ Click color picker to change color</li>
            </ul>
        </div>

        <div class="color-list-section">
            <h3>Color Palette</h3>
            <div id="colorList" class="color-list"></div>
        </div>
    </div>

    <!-- Hidden elements required by SVGColorAnalyzer -->
    <div style="display: none;">
        <div id="uploadArea"></div>
        <input type="file" id="fileInput" />
        <div id="mainContent"></div>
        <div id="svgPreview"></div>
        <canvas id="highlightCanvas"></canvas>
        <div id="colorPaletteTop"></div>
        <span id="originalColorCount"></span>
        <span id="currentColorCount"></span>
        <input type="range" id="colorCountSlider" />
        <span id="colorCountValue"></span>
        <button id="reduceBtn"></button>
        <button id="resetBtn"></button>
        <button id="downloadBtn"></button>
        <button id="clearHighlightBtn"></button>
        <div id="loadingIndicator"></div>
        <div id="errorMessage"></div>
        <canvas id="analysisCanvas"></canvas>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" 
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" 
            crossorigin="anonymous"></script>
    <script src="app.js"></script>
    <script>
        // Wait for app to initialize
        $(document).ready(() => {
            // Set up test color data
            window.app.colorData = [
                { 
                    hex: '#ff5733', 
                    percentage: 35.67, 
                    rgb: { r: 255, g: 87, b: 51 },
                    count: 15234
                },
                { 
                    hex: '#33ff57', 
                    percentage: 28.45, 
                    rgb: { r: 51, g: 255, b: 87 },
                    count: 12156
                },
                { 
                    hex: '#3357ff', 
                    percentage: 18.92, 
                    rgb: { r: 51, g: 87, b: 255 },
                    count: 8089
                },
                { 
                    hex: '#ffff33', 
                    percentage: 10.23, 
                    rgb: { r: 255, g: 255, b: 51 },
                    count: 4372
                },
                { 
                    hex: '#ff33ff', 
                    percentage: 6.73, 
                    rgb: { r: 255, g: 51, b: 255 },
                    count: 2876
                }
            ];

            // Mock updateColor method to show it's being called
            const originalUpdateColor = window.app.updateColor;
            window.app.updateColor = function(index, newHex) {
                console.log(`updateColor called: index=${index}, newHex=${newHex}`);
                alert(`Color ${index} changed to ${newHex}\n\nIn the real app, this would update the SVG.`);
                
                // Update the color data to reflect the change
                this.colorData[index].hex = newHex;
                const rgb = this.hexToRgb(newHex);
                if (rgb) {
                    this.colorData[index].rgb = rgb;
                }
                
                // Re-render to show the change
                this.renderColorList();
            };

            // Render the color list
            window.app.renderColorList();
            
            console.log('Test page loaded. Try clicking on a color picker to change a color!');
        });
    </script>
</body>
</html>
